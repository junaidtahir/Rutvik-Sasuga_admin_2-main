"use strict";(self.webpackChunksasuga_admin=self.webpackChunksasuga_admin||[]).push([[793],{3793:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});var s=a(3433),n=a(7762),i=a(4165),l=a(5861),r=a(9439),o=a(2791),c=a(7380),d=a(6048),x=a.n(d),m=a(7425),u=a(4),p=a(1095),f=a(9230),h=a(6910),g=a(1213),v=a(2481),N=a(2426),b=a.n(N),y=a(2801),j=a(2127),w=a(184),C=function(e){var t=e.open,a=e.setOpen,s=(0,f.$G)().t,n=(0,o.useState)(""),d=(0,r.Z)(n,2),x=d[0],m=d[1],g=(0,o.useState)(""),N=(0,r.Z)(g,2),b=N[0],C=N[1],F=(0,o.useState)(!1),k=(0,r.Z)(F,2),E=(k[0],k[1]),S=(0,h.F_)(p.I8),D=((0,r.Z)(S,1)[0],(0,o.useState)([])),T=(0,r.Z)(D,2),Z=T[0],P=T[1],M=function(){a(!1)},U=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(){var t,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("type: "+Z.value),console.log("title: "+x),console.log("message: "+b),"PushNotification"!==Z.value){e.next=9;break}t=(0,v.hJ)(p.db,"notifications"),(0,v.ET)(t,{created_at:new Date,message:b,type:"pushNotification"}).then((function(e){console.log("push added to database.")})),fetch("https://us-central1-sasuga-d222e.cloudfunctions.net/sendMulPushNotifications",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({message:b,title:x})}).then((function(e){if(!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));return e.json()})).then((function(e){console.log(e)})).catch((function(e){console.error(e)})),e.next=14;break;case 9:if("EmailNotifications"!==Z.value){e.next=14;break}return a=(0,v.hJ)(p.db,"mail"),e.next=13,(0,v.ET)(a,{to:x,message:{html:b,subject:"Sasuga support"}}).then((function(e){var t=(0,v.hJ)(p.db,"notifications");(0,v.ET)(t,{created_at:new Date,message:b,type:"emailNotification"})}));case 13:alert("Email sent");case 14:m(""),C(""),M(),E(!0);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(y.u.Root,{show:t,as:o.Fragment,children:(0,w.jsxs)(j.V,{as:"div",className:"relative z-50",onClose:M,children:[(0,w.jsx)(y.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,w.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 transition-opacity"})}),(0,w.jsx)("div",{className:"fixed top-1/2 -translate-y-1/2 z-10 w-screen overflow-y-auto",children:(0,w.jsx)("div",{className:"flex min-h-full items-end justify-center  text-center sm:items-center sm:p-0",children:(0,w.jsx)(y.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,w.jsxs)(j.V.Panel,{className:"relative  transform overflow-hidden rounded-[10px] bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-[654px]",children:[(0,w.jsxs)("div",{className:"py-3 px-[32px] sm:block w-full flex items-center justify-between relative border-b border-[#D5DDEC]",children:[(0,w.jsx)("h2",{className:"text-lg leading-7 text-[#252423] font-medium",children:s("SendMessage.SendMessage")}),(0,w.jsx)("div",{className:"absolute top-[51%] -translate-y-1/2 right-3 cursor-pointer",onClick:M,children:(0,w.jsx)(u.Pt,{})})]}),(0,w.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,w.jsx)("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"}),(0,w.jsxs)("div",{className:"flex flex-col gap-6 mt-6 pb-10 flex-wrap px-3",children:[(0,w.jsxs)("div",{className:"flex items-center gap-6 flex-wrap",children:[(0,w.jsxs)("p",{className:"w-[88px] text-left text-base font-semibold leading-6 text-[#000]",children:[s("Notification.Type"),":"]}),(0,w.jsx)(c.ZP,{value:Z,onChange:function(e){P(e)},options:[{value:"PushNotification",label:"Push Notifications"},{value:"EmailNotifications",label:"Email Notifications"}],placeholder:"Choose Type",className:"md:w-[400px] w-full min-w-[180px] rounded-l-lg rounded-r-[0px] font-normal text-[14px] leading-[22px] notificationType mr-4"})]}),(0,w.jsxs)("div",{className:"flex items-center gap-6 flex-wrap",children:[(0,w.jsx)("p",{className:"w-[88px] text-left text-base font-semibold leading-6 text-[#000]",children:"EmailNotifications"==Z.value?"To":"".concat(s("Notification.Title"),":")}),(0,w.jsx)("input",{type:"text",className:"md:w-[400px] w-full pl-4 border border-[#D5DDEC] py-3 rounded-lg placeholder:text-Typography placeholder:text-sm text-sm text-Typography focus:outline-none text-typography font-medium",placeholder:"EmailNotifications"==Z.value?"Email":"Title",value:x,onChange:function(e){return m(e.target.value)}})]}),(0,w.jsxs)("div",{className:"flex items-center gap-6 flex-wrap",children:[(0,w.jsxs)("p",{className:"w-[88px] text-left text-base font-semibold leading-6 text-[#000]",children:[s("SendMessage.Message"),":"]}),(0,w.jsx)("textarea",{className:"md:w-[400px] w-full px-4 border border-[#D5DDEC] py-3 rounded-lg placeholder:text-Typography placeholder:text-sm text-sm text-Typography focus:outline-none text-typography font-medium h-[132px]",placeholder:s("SendMessage.TypeMessageHere"),value:b,onChange:function(e){return C(e.target.value)}})]}),(0,w.jsx)("button",{className:"md:max-w-[435px] h-[50px] text-center text-[#fff] bg-[#353A3F] rounded-md md:ml-[110px] ml-0",onClick:U,children:s("SendMessage.Send")})]})]})]})})})})]})})})},F=function(e){var t=e.selectedUser,a=e.openDelete,s=e.setOpenDelete,n=e.deleteNotification,i=(0,f.$G)().t;return(0,w.jsx)(y.u.Root,{show:a,as:o.Fragment,children:(0,w.jsxs)(j.V,{as:"div",className:"relative z-50",onClose:function(){s(!a)},children:[(0,w.jsx)(y.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,w.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 transition-opacity"})}),(0,w.jsx)("div",{className:"fixed top-1/2 -translate-y-1/2 z-10 w-screen overflow-y-auto",children:(0,w.jsx)("div",{className:"flex min-h-full items-end justify-center  text-center sm:items-center sm:p-0",children:(0,w.jsx)(y.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,w.jsxs)(j.V.Panel,{className:"relative  transform overflow-hidden rounded-[10px] bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-[654px]",children:[(0,w.jsxs)("div",{className:"py-3 px-[32px] sm:block w-full flex items-center justify-between relative border-b border-[#D5DDEC]",children:[(0,w.jsx)("h2",{className:"text-lg leading-7 text-[#252423] font-medium",children:i("SendMessage.DeleteUser")}),(0,w.jsx)("div",{className:"absolute top-[51%] -translate-y-1/2 right-3 cursor-pointer",onClick:function(){return s(!a)},children:(0,w.jsx)(u.Pt,{})})]}),(0,w.jsx)("div",{className:"sm:flex sm:items-start px-[32px] justify-center",children:(0,w.jsxs)("div",{className:"flex flex-col gap-4 py-[60px]",children:[(0,w.jsx)("div",{className:"w-[72px] h-[72px] rounded-full bg-[#F4F4F6] mx-auto flex items-center justify-center",children:(0,w.jsx)(u.d,{})}),(0,w.jsx)("div",{className:"text-center",children:(0,w.jsxs)("p",{className:"max-w-[270px] text-[#52678E] font-medium",children:[i("SendMessage.YouAreAboutToDelete")," ",(0,w.jsx)("span",{className:"text-[#000] font-bold block",children:t})," ",i("SendMessage.ClickConfirmToDelete")]})}),(0,w.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,w.jsx)("button",{className:"h-[38px] w-[87px] rounded-lg bg-[#16B188] text-white font-semibold",onClick:function(){return n()},children:i("SendMessage.Confirm")}),(0,w.jsx)("button",{className:"h-[38px] w-[87px] rounded-lg bg-transparent hover:bg-[#16B188] hover:text-white text-[#000] border border-[#D5DDEC] font-bold hover:font-semibold",onClick:function(){return s(!a)},children:i("SendMessage.Cancel")})]})]})})]})})})})]})})},k=function(){var e=(0,f.$G)().t,t=(0,o.useState)(!1),a=(0,r.Z)(t,2),d=a[0],N=a[1],y=(0,o.useState)(!1),j=(0,r.Z)(y,2),k=j[0],E=j[1],S=(0,o.useState)(""),D=(0,r.Z)(S,2),T=D[0],Z=D[1],P=(0,o.useState)([]),M=(0,r.Z)(P,2),U=(M[0],M[1],(0,o.useState)([])),A=(0,r.Z)(U,2),O=(A[0],A[1],(0,o.useState)([])),_=(0,r.Z)(O,2),J=_[0],L=_[1],V=(0,o.useState)([]),I=(0,r.Z)(V,2),R=I[0],Y=I[1],z=(0,o.useState)([]),G=(0,r.Z)(z,2),$=G[0],B=G[1],H=(0,h.F_)(p.I8),q=((0,r.Z)(H,1)[0],(0,o.useState)(!1)),X=(0,r.Z)(q,2),K=X[0],Q=X[1],W=(0,o.useState)([]),ee=(0,r.Z)(W,2),te=ee[0],ae=ee[1];(0,o.useEffect)((function(){var e=(0,v.IO)((0,v.hJ)(p.db,"notifications"),(0,v.Xo)("created_at","desc")),t=(0,v.cf)(e,(function(e){var t=[];e.forEach((function(e){var a=e.data();a.id=e.id,t.push(a)})),Q(!1);var a=R.length>0?t.filter((function(e){return R.some((function(t){return function(e,t){return"PushNotification"===t.value&&"pushNotification"===e.type||"EmailNotification"===t.value&&"emailNotification"===e.type}(e,t)}))})):t;L(a)}));return function(){return t}}),[R]);var se=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=(0,v.JU)(p.db,"notifications",T),e.next=4,(0,v.oe)(t).then((function(){return E(!1)}));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(){var t,a,s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=(0,n.Z)(te),e.prev=2,t.s();case 4:if((a=t.n()).done){e.next=11;break}return s=a.value,l=(0,v.JU)(p.db,"notifications",s),e.next=9,(0,v.oe)(l);case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),t.e(e.t0);case 16:return e.prev=16,t.f(),e.finish(16);case 19:ae([]),e.next=24;break;case 22:e.prev=22,e.t1=e.catch(0);case 24:case"end":return e.stop()}}),e,null,[[0,22],[2,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),ie=function(e){le(e)?ae((function(t){return t.filter((function(t){return t!==e}))})):ae((function(t){return[].concat((0,s.Z)(t),[e])}))},le=function(e){return te.includes(e)},re=function(){if(K)ae([]);else{var e=J.map((function(e){return e.id}));ae(e)}Q(!K)};function oe(t){var a=t.currentItems;return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("table",{className:"min-w-full table-fixed rounded-tl-[10px] border-2 border-[#E3E8F2] overflow-hidden mt-6",style:{borderCollapse:"inherit"},children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{className:"divide-x divide-[#E3E8F2]",children:[(0,w.jsx)("th",{scope:"col",className:"relative py-3 px-4 text-left text-sm text-[#52678E] font-medium bg-[#F4F4F6]",children:(0,w.jsx)("input",{type:"checkbox",checked:K,onChange:re,className:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"})}),(0,w.jsx)("th",{scope:"col",className:"py-3 px-4 text-left text-sm text-[#52678E] font-medium bg-[#F4F4F6]",children:e("Notification.Number")}),(0,w.jsx)("th",{scope:"col",className:"py-3 px-4 text-left text-sm text-[#52678E] font-medium bg-[#F4F4F6]",children:e("Notification.NotificationMessagelete")}),(0,w.jsx)("th",{scope:"col",className:"py-3 px-4 text-left text-sm text-[#52678E] font-medium bg-[#F4F4F6]",children:e("Notification.NotificationType")}),(0,w.jsx)("th",{scope:"col",className:"py-3 px-4 text-left text-sm text-[#52678E] font-medium bg-[#F4F4F6]",children:e("Notification.CreateTime")}),(0,w.jsx)("th",{scope:"col",className:"py-3 px-4 text-left text-sm text-[#52678E] font-medium bg-[#F4F4F6]",children:e("Notification.Action")})]})}),(0,w.jsx)("tbody",{className:"bg-white",children:a&&a.map((function(e,t){var a,s=b()(null===e||void 0===e||null===(a=e.created_at)||void 0===a?void 0:a.toDate()).format("MMM Do YYYY, h:mm:ss a");return(0,w.jsxs)("tr",{className:"bg-gray-50 divide-y divide-x divide-[#E3E8F2] ",children:[(0,w.jsx)("td",{className:"py-6 px-4 border-t border-bordercolor",children:(0,w.jsx)("input",{onChange:function(){return ie(e.id)},checked:le(e.id),type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"})}),(0,w.jsx)("td",{className:"text-[#000000] py-6 px-4 font-medium",children:t+1}),(0,w.jsx)("td",{className:"text-[#000000] py-6 px-4 font-medium",children:e.message}),(0,w.jsx)("td",{className:"text-[#000000] py-6 px-4 font-medium",children:e.type}),(0,w.jsx)("td",{className:"text-[#000000] py-6 px-4 font-medium",children:s}),(0,w.jsx)("td",{className:"text-[#000000] py-6 px-4 flex items-center gap-4",children:(0,w.jsx)("span",{className:"h-[32px] w-[32px] bg-[#F4C4AF] rounded-full flex items-center justify-center",children:(0,w.jsx)(m.GnT,{onClick:function(){E(!0),Z(e.id)},className:"text-[#CE463F]"})})})]},e.id)}))})]})})}function ce(t){var a=t.itemsPerPage,s=(0,o.useState)(null),n=(0,r.Z)(s,2),i=n[0],l=n[1],c=(0,o.useState)(0),d=(0,r.Z)(c,2),m=d[0],u=d[1],p=(0,o.useState)(0),f=(0,r.Z)(p,2),h=f[0],g=f[1];(0,o.useEffect)((function(){var e=h+a;l(J.slice(h,e)),u(Math.ceil(J.length/a))}),[h,a]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(oe,{currentItems:i}),(0,w.jsxs)("div",{className:"bottom-cont",children:[i&&(0,w.jsxs)("p",{className:"tablePageStatus",children:[e("UserManagement.Showing")," ",i.length," of"," ",J.length]}),(0,w.jsx)(x(),{nextLabel:"\u2192",onPageChange:function(e){var t=e.selected*a%J.length;console.log("User requested page number ".concat(e.selected,", which is offset ").concat(t)),g(t)},pageRangeDisplayed:3,marginPagesDisplayed:2,pageCount:m,previousLabel:"\u2190",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakLabel:"...",breakClassName:"page-item",breakLinkClassName:"page-link",containerClassName:"pagination",activeClassName:"active",renderOnZeroPageCount:null})]})]})}return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{className:"mt-10 px-[32px]",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,w.jsx)("button",{className:"bg-[#677DA4] text-white px-4 py-2.5 rounded-md",onClick:function(){N(!0)},children:e("Notification.NewNotification")}),(0,w.jsx)("div",{className:"flex items-center gap-4 divide-x-2 divide-[#E3E8F2]",children:R.length>0?(0,w.jsxs)("div",{className:"flex items-center",children:[(0,w.jsxs)("h2",{className:"font-semibold text-xl text-[#000] leading-[28px]",children:[J.length," ",e("UserManagement.Results")]}),(0,w.jsxs)("h3",{className:"font-medium text-medium  text-[#000] relative pl-4",children:[e("UserManagement.ClearFilters")," ",(0,w.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 -right-6 w-[18px] h-[18px] rounded-full bg-[#F4F4F6] flex items-center justify-center",children:(0,w.jsx)(g.$iT,{onClick:function(){Y([])},className:"text-sm text-[#52678E] font-medium cursor-pointer"})})]})]}):(0,w.jsx)("div",{})}),(0,w.jsxs)("div",{className:"flex items-center flex-wrap filtter relative left-[-1px] gap-4",children:[(0,w.jsxs)("h2",{className:"font-bold text-[18px] leading-[24px] text-[#000] mr-4",children:[e("Notification.Type"),":"]}),(0,w.jsx)(c.ZP,{value:R,onChange:Y,options:[{value:"PushNotification",label:"PushNotification"},{value:"EmailNotification",label:"EmailNotification"}],placeholder:"All",isMulti:!0,className:"min-w-[180px] rounded-l-lg rounded-r-[0px] font-normal text-[14px] leading-[22px] notificationType mr-4"}),(0,w.jsxs)("div",{className:"relative mr-12 flex items-center",children:[(0,w.jsxs)("h2",{className:"font-bold text-[18px] leading-[24px] text-[#000] mr-4",children:[e("Notification.Search"),":"]}),(0,w.jsx)(c.ZP,{value:$,onChange:B,options:[{value:"Suspended",label:"Suspended"},{value:"Verified",label:"Verified"}],isMulti:!0,placeholder:e("Notification.UserEmailOrUsername"),className:"min-w-[180px] min-h-[46px] lastinput font-normal text-[14px] leading-[22px] suspended"}),(0,w.jsx)("div",{className:"flex items-center flex-wrap absolute top-1/2 -translate-y-1/2 -right-[3.03rem]",children:(0,w.jsx)("button",{className:"min-h-[46px] px-4 py-2 box-border bg-gray rounded-r-lg text-white",children:(0,w.jsx)(u.bu,{})})})]}),(0,w.jsx)("button",{onClick:function(){return ne()},className:"min-h-[46px] px-5 py-2 box-border rounded-md text-white ".concat(te.length>0?"bg-[#677DA4]":"bg-gray"),children:e("Notification.Delete")})]})]}),(0,w.jsx)("div",{className:"w-full overflow-x-auto",style:{borderBottom:"2px solid #D5DDEC",borderRadius:"0 0 10px 10px"},children:(0,w.jsx)(ce,{itemsPerPage:4})}),(0,w.jsx)(C,{open:d,setOpen:N}),(0,w.jsx)(F,{openDelete:k,selectedUser:T,deleteNotification:se,setOpenDelete:E})]})})}}}]);
//# sourceMappingURL=793.7c4dbf29.chunk.js.map